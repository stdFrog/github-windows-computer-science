파일 맵핑의 또다른 활용예로 프로세스간 메모리 공유 기법이 있다.

하나의 파일 맵핑 오브젝트에 대해 뷰는 여러 개를 열 수 있다.
큰 파일의 각각 다른 부분을 동시에 액세스하려면 두 개 이상의 뷰를 열어놓고 사용해도 상관없다.

이렇게 되면 아무리 큰 파일이라도 완전한 랜덤 액세스가 가능해진다.

프로세스간에 메모리를 공유하고자 할 때도 파일 맵핑은 아주 훌륭한 해결책이 된다.


CreateFileMapping 첫 번째 인수에 0xFFFFFFFF(INVALID_HANDLE_VALUE)를 주어
페이징 파일에 파일 맵핑 오브젝트를 만들고 이 오브젝트의 이름을 주면 다른 프로세스에서 같은 이름으로 OpenFileMapping을 사용하여 파일 맵핑 오브젝트를 액세스할 수 있다.

한 파일(디스크상의 파일이 아니더라도)이 두 프로세스의 주소 공간으로 맵핑되었으므로 이 파일의 영역은 두 프로세스가 공유하게 된다.

예제를 보자.

memShare의 워크 스페이스 안에 MemShare1, MemShare2 프로젝트가 포함되어 있으며 두 실행 파일이 하나의 파일 맵핑 오브젝트로 메모리를 공유한다.